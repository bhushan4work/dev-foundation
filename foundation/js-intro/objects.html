<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1 id="myH1"></h1>

    <script>
        //Map -object that holds key-value pairs of any data type
        const store = new Map([
            ["t-shirt", 20],
            ["jeans", 30],
            ["socks", 10]
        ]);
        //store.get("t-shirt");  outputs 20
        //store.set("hat", 40);  adds this key:value  
        //store.delete("hat"); 
        //console.log(store.has("underwear"));  returns bool
        //console.log(store.size); 
        store.forEach((value, key) => console.log(`${key} $${value}`));

        // object -group of properties and methods
        const car = {
            model: "Mustang",
            year: 2023,
            drive: function () {
                console.log("You drive the car");
            }
        }
        console.log(car.model);
        car.drive();

        //this -reference to particular obj, object depends on immediate context
        const car1 = {
            model: "Mustang",
            year: 2023,
            drive: function () {
                console.log(`You drive the ${this.model}`);
            }
        }
        const car2 = {
            model: "Corvette",
            year: 2024,
            drive: function () {
                console.log(`You drive the ${this.model}`);
            }
        }
        car1.drive();
        car2.drive();

        // get -binds obj property to a fxn when that property is accessed
        // set -binds an obj property to a fxn when that property is assigned a value
        class Car {
            constructor(power) {
                this._gas = 25;   // '_' is used so devs know that its a protected prop  
                this._power = power;   //& one should not mess with it
            }
            get power() {
                return `${this._power}hp`;
            }
            get gas() {
                return `${this._gas}L (${this._gas / 50 * 100}%)`;
            }
            set gas(value) {
                if (value > 50) {
                    value = 50;
                }
                else if (value < 0) {
                    value = 0;
                }
                this._gas = value;
            }
        }
        let carr = new Car(400);
        carr.gas = 100;  //as gas has a setter we can assign a value

        console.log(carr.power);
        console.log(carr.gas);

        //Pass Js obj as arguments in fxn
        class Car {
            constructor(model, year, color) {
                this.model = model;
                this.color = color;
            }
        }
        const car0 = new Car("Mustang", 2023, "red",);

        displayInfo(car0); //obj is passed as argument in fxn
        changeColor(car0, "gold");

        function displayInfo(car) {
            console.log(car.model);
            console.log(car.color);
        }
        function changeColor(car, color) {
            car.color = color;
        }

        //Anonymous obj 
        class Card {
            constructor(value, suit) {
                this.value = value;
                this.suit = suit;
            }
        }
        let cards = [new Card("A", "Hearts"),
        new Card("A", "Spades"),
        new Card("2", "Clubs")];
        cards.forEach(card => console.log(`${card.value} ${card.suit}`));

        // promise -obj that encapsulates the result of an asynchronous operation, 
        //          it lets asynchronous methods return values like synchronous methods
        //          the STATE is 'pending' then: 'fulfilled' or 'rejected' ,
        //          the RESULT is what can be returned
        //          there are 2 parts: producing & consuming
        //ex1:
        const promise = new Promise((resolve, reject) => {
            let fileLoaded = false;
            if (fileLoaded) {
                resolve("File loaded");
            }
            else {
                reject("File NOT loaded");
            }
        });
        promise.then(value => console.log(value))
            .catch(error => console.log(error));

        //ex2:
        const wait = time => new Promise(resolve => {
            setTimeout(resolve, time);
        });
        wait(3000).then(() => console.log("Thanks for waiting!"));

        //async keyword -makes a fxn return a Promise
        async function loadFile() {  //this part is 'producingCode'
            let fileLoaded = true;
            if (fileLoaded) {
                return "File loaded";
            }
            else {
                throw "File NOT loaded";
            }
        }
        loadFile().then(value => console.log(value))  //this part is 'consumingCode'
            .catch(error => console.log(error));

        //await -makes a async fxn wait for a Promise
        async function loadFile() {
            const promise = new Promise((resolve, reject) => {
                let fileLoaded = true
                if (fileLoaded) {
                    resolve("File loaded");
                }
                else {
                    reject("File NOT loaded");
                }
            })
            try {
                document.getElementById("myH1").innerHTML = await promise;
            }
            catch (error) {
                document.getElementById("myH1").innerHTML = error;
            }
        }
        loadFile();

        // fetch -fxn used for making HTTP requests to fetch resources (JSON style data, images, files)
        //         simplifies asynchronous data fetching in Js & used for interacting with APIs to retrieve &
        //         send data asynchronously over the web
        //         fetch(url, {options})
        async function fetchData() {
            try {
                const pokemonName = document.getElementById("pokemonName").value.toLowerCase();
                const response = await fetch("https://pokeapi.co/api/v2/pokemon/pikachu");

                if (!response.ok) {
                    throw new Error("Could not fetch resource");
                }
                const data = await response.json();
            }
            catch (error) {
                console.error(error);
            }
        }

    </script>
</body>

</html>